<!DOCTYPE html>
<html>
<head>
    <title>Trust Bazaar Reset</title>
    <script src="https://sdk.minepi.com/pi-sdk.js"></script>
    <style>
        body { background: #673ab7; color: white; font-family: sans-serif; text-align: center; padding-top: 50px; }
        .box { background: white; color: black; margin: 20px; padding: 20px; border-radius: 10px; }
        button { padding: 10px; background: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body>

    <h1>Trust Bazaar Debug</h1>
    <div class="box">
        <p>Status: <span id="status">Loading Pi SDK...</span></p>
        <button onclick="payPi()">Test 1 Pi Payment</button>
    </div>
    <div id="logs" style="font-family: monospace; font-size: 10px; color: #ccc;"></div>

    <script>
        function log(m) { document.getElementById('logs').innerHTML += "<div>> " + m + "</div>"; }

        window.onload = function() {
            log("Window loaded.");
            try {
                Pi.init({ version: "2.0" });
                log("SDK Init Success.");
                Pi.authenticate(['username', 'payments'], function(p){ log("Incomplete found"); })
                    .then(function(auth) {
                        document.getElementById('status').innerText = "Connected as " + auth.user.username;
                        log("Auth success: " + auth.user.username);
                    })
                    .catch(function(e) { log("Auth Error: " + e.message); });
            } catch(err) {
                log("Fatal: " + err.message);
            }
        };

        function payPi() {
            log("Attempting payment...");
            Pi.createPayment({
                amount: 1.0,
                memo: "Test Audit",
                metadata: { id: "123" }
            }, {
                onReadyForServerApproval: function(id) { log("Approved ID: " + id); },
                onReadyForServerCompletion: function(id, tx) { alert("PAID! Score: 88%"); },
                onCancel: function() { log("Cancelled"); },
                onError: function(e) { log("Error: " + e.message); }
            });
        }
    </script>
</body>
</html>