<script>
    // 1. Wait for the SDK to load
    window.onload = function() {
        const Pi = window.Pi;
        Pi.init({ version: "2.0" });

        document.getElementById('auth_btn').onclick = function() {
            console.log("Login button clicked...");
            
            // 2. Start Authentication
            Pi.authenticate(['username', 'payments'], function(payment) {
                // This part handles payments later
            }).then(function(auth) {
                alert("Success! Welcome " + auth.user.username);
                document.body.innerHTML = "<h1>Welcome " + auth.user.username + "</h1>";
            }).catch(function(error) {
                console.error(error);
                alert("Login failed: " + error.message);
            });
        };
    };
</script>
